<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Movie Carousel</title>

</head>
<body class="dark-mode">

<!-- Header -->
<div id="header-placeholder"></div>

<!-- Main Content -->
<div class="section">
  <div class="section-title">Trending Movies</div>
  <div class="carousel-container" id="movies-carousel">
    <!-- Placeholder for loading -->
    <div class="carousel-item">
      <div class="image-container loading"></div>
      <div class="title-container loading" style="height: 48px;"></div>
    </div>
    <div class="carousel-item">
      <div class="image-container loading"></div>
      <div class="title-container loading" style="height: 48px;"></div>
    </div>
    <div class="carousel-item">
      <div class="image-container loading"></div>
      <div class="title-container loading" style="height: 48px;"></div>
    </div>
  </div>
</div>

<!-- Footer -->
<div id="footer-placeholder"></div>

<script>
// Function to fetch movie data
async function fetchMovies(apiUrl) {
  const response = await fetch(apiUrl);
  const data = await response.json();
  return data.results;
}

// Function to display movies
function displayMovies(movies, containerId) {
  const carousel = document.getElementById(containerId);
  carousel.innerHTML = ''; // Clear placeholder items

  movies.forEach(movie => {
    const item = document.createElement('div');
    item.classList.add('carousel-item');
    item.innerHTML = `
      <div class="image-container">
        <img src="${movie.sources[0].thumbnail}" alt="${movie.Title2}">
      </div>
      <div class="title-container">
        <div class="title">${movie.Title2} (${movie.year})</div>
      </div>
    `;
    
    item.addEventListener('click', () => {
      const movieData = {
        title: movie.Title2,
        year: movie.year,
        downloadLink: movie.sources[0].downloadLink,
        streamUrl: movie.sources[0].streamUrl,
        viewLink: movie.sources[0].viewLink,
        thumbnail: movie.sources[0].thumbnail,
        qualities: movie.sources.map(source => ({
          quality: source.quality,
          streamUrl: source.streamUrl,
          fileSize: source.fileSize
        }))
      };
      window.location.href = `src/template/watchPage.html?data=${encodeURIComponent(JSON.stringify(movieData))}`;
    });

    carousel.appendChild(item);
  });
}

// Fetch and display movies
fetchMovies('https://mymoviesclan-api.vercel.app/api/anime')
  .then(movies => displayMovies(movies, 'movies-carousel'))
  .catch(console.error);
</script>

  
  <script>
    // Load Header and Footer using JavaScript
    fetch('src/template/header.html')
      .then(response => response.text())
      .then(data => document.getElementById('header-placeholder').innerHTML = data);

    fetch('src/template/footer.html')
      .then(response => response.text())
      .then(data => document.getElementById('footer-placeholder').innerHTML = data);
  </script>
  

